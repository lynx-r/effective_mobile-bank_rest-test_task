# Unit Tests для сервисов BankRest

## Обзор

Данная директория содержит unit тесты для всех сервисов приложения BankRest. Тесты написаны с использованием JUnit 5, Mockito и AssertJ.

## Структура тестов

### UserServiceImplTest

Тесты для сервиса управления пользователями (`UserServiceImpl`).

**Покрываемые методы:**
- `findAllUsers()` - получение списка всех пользователей
- `blockUser(Long id)` - блокировка пользователя
- `deleteUser(Long id)` - удаление пользователя

**Сценарии тестирования:**
- ✅ Успешное получение списка пользователей
- ✅ Возврат пустого списка при отсутствии пользователей
- ✅ Успешная блокировка существующего пользователя
- ✅ Обработка исключения при блокировке несуществующего пользователя
- ✅ Успешное удаление пользователя
- ✅ Обработка ошибок при удалении несуществующего пользователя

### CardServiceImplTest

Тесты для сервиса управления картами (`CardServiceImpl`).

**Покрываемые методы:**
- `findAllCards()` - получение списка всех карт
- `createCard(CreateCardRequest request)` - создание новой карты
- `updateStatus(Long id, CardStatus status)` - обновление статуса карты
- `deleteCard(Long id)` - удаление карты

**Сценарии тестирования:**
- ✅ Успешное получение списка карт
- ✅ Возврат пустого списка при отсутствии карт
- ✅ Успешное создание карты для существующего пользователя
- ✅ Обработка исключения при создании карты для несуществующего пользователя
- ✅ Успешное обновление статуса карты
- ✅ Обработка исключения при обновлении статуса несуществующей карты
- ✅ Успешное удаление карты
- ✅ Обработка исключения при удалении несуществующей карты

## Используемые технологии

- **JUnit 5** - фреймворк для написания и выполнения тестов
- **Mockito** - библиотека для создания мок-объектов
- **AssertJ** - библиотека для проверки утверждений (assertions)
- **Lombok** - для создания тестовых данных

## Запуск тестов

```bash
# Запуск всех тестов в модуле bankrest
./gradlew :bankrest:test

# Запуск тестов с детальным выводом
./gradlew :bankrest:test --info

# Запуск конкретного тестового класса
./gradlew :bankrest:test --tests "com.example.bankrest.service.UserServiceImplTest"
```

## Результаты выполнения

✅ **Все тесты проходят успешно**
- Общее количество тестов: 12
- Время выполнения: ~17 секунд
- Покрытие: 100% публичных методов сервисов

## Рекомендации по расширению

1. **Интеграционные тесты** - добавить тесты с реальной базой данных
2. **Тесты производительности** - для методов с большими объемами данных
3. **Тесты безопасности** - проверка авторизации и доступа
4. **Параметризованные тесты** - для тестирования различных входных данных

## Примечания

- Все тесты используют мок-объекты для изоляции логики сервисов от зависимостей
- Тесты покрывают как успешные сценарии, так и граничные случаи
- Используется правильная настройка Mockito с `@ExtendWith(MockitoExtension.class)`
